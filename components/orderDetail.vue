<template>
  <div class="flex flex-col space-y-4">
    <div
      v-for="(item, index) in data.products"
      :key="index"
      class="flex space-x-4"
    >
      <img
        :src="item.image_url"
        class="w-28 h-28 transition-transform duration-500 ease-in-out transform hover:scale-105 cursor-pointer"
        @click="navigateToProduct(item.product_id)"
      >
      <div class="flex flex-col w-52">
        <h3 class="text-lg text-wrap font-medium">
          {{ item.product_name }}
        </h3>
        <h4 class="w-52 text-sm truncate">
          {{ item.product_description }}
        </h4>
      </div>

      <h4 class="p-3">
        {{ item.quantity }}
      </h4>
      <h4 class="py-3 font-medium">
        {{ Intl.NumberFormat('vi-VN', {
          style: 'currency', currency: 'VND',
        }).format(item.product_price * item.quantity) }}
      </h4>
    </div>
  </div>
</template>

<script setup>
import { reloadState } from '~/stores/storeModal'

const order_id = storeToRefs(reloadState()).order_id
console.log('ðŸš€ ~ order_id:', order_id.value)

const { data } = await useFetch(`https://linkss.pages.dev/api/orders/getProductList`, {
  query: { order_id: `${order_id.value}` },
})
// const data = ref()
// data.value = { "success": true, "products": [ { "order_id": "ORDER1717429717241", "product_id": "UI06", "product_name": "Quáº¡t Äiá»‡n Kaimeidi", "product_description": "ChÃ o má»«ng Ä‘áº¿n vá»›i cá»­a hÃ ng cá»§a chÃºng tÃ´i \"|\"\nðŸ€ Náº¿u quan tÃ¢m Ä‘áº¿n giÃ¡ bÃ¡n buÃ´n , báº¡n cÃ³ thá»ƒ trÃ² chuyá»‡n riÃªng vá»›i chÃºng tÃ´i \"|\"\nðŸ€ Khi báº¡n nháº­n Ä‘Æ°á»£c sáº£n pháº©m , xin vui lÃ²ng nháº¥n cháº¥p nháº­n \"|\"\nðŸ€ÄÃ¡nh giÃ¡ 5 sao ráº¥t khuyáº¿n khÃ­ch cho cá»­a hÃ ng cá»§a chÃºng tÃ´i \"|\"\nðŸ€ Náº¿u khÃ¡ch hÃ ng khÃ´ng hÃ i lÃ²ng vá»›i há»‡ thá»‘ng giao hÃ ng . Vui lÃ²ng tÃ¡ch dá»‹ch vá»¥ khá»i cÃ¡c cá»­a hÃ ng vÃ  cÃ´ng ty váº­n táº£i. bá»Ÿi vÃ¬ cá»­a hÃ ng khÃ´ng thá»ƒ thá»±c sá»± kiá»ƒm soÃ¡t viá»‡c váº­n chuyá»ƒn \"|\"\nðŸ€ Náº¿u sáº£n pháº©m cÃ³ váº¥n Ä‘á» hoáº·c Ä‘ang Ä‘Æ°á»£c váº­n chuyá»ƒn . Xin vui lÃ²ng liÃªn há»‡ vá»›i cá»­a hÃ ng cá»§a chÃºng tÃ´i Ä‘á»ƒ Ä‘Æ°á»£c trá»£ giÃºp vÃ  sá»­a chá»¯a \"|\"\nðŸ€ Sáº£n pháº©m cá»§a chÃºng tÃ´i cÃ³ cháº¥t lÆ°á»£ng cao vÃ  giÃ¡ ráº» . VÃ¬ váº­y , báº¡n khÃ´ng pháº£i lo láº¯ng ráº±ng sáº£n pháº©m sáº½ khÃ´ng khá»›p vá»›i sáº£n pháº©m tháº­t . CÃ¡c sáº£n pháº©m cÃ³ cháº¥t lÆ°á»£ng cao vÃ  cháº¯c cháº¯n ráº» \"|\"", "product_price": 135000, "quantity": 1, "image_url": "https://down-vn.img.susercontent.com/file/sg-11134201-7qver-lhzm1aur8cb64a" }, { "order_id": "ORDER1717429717241", "product_id": "UI15", "product_name": "Nafenai ÄÃ¨n led Äá»ƒ BÃ n", "product_description": "Äáº·c Ä‘iá»ƒm ká»¹ thuáº­t: NÃºt 3W [Ã¡nh sÃ¡ng áº¥m] Giao diá»‡n USB, |\nÄiá»‡n Ã¡p: 220V |\nKÃ­nh gá»­i quÃ½ khÃ¡ch hÃ ng â™¥ ï¼š |\nã€ðŸŒ¿LÆ°u Ã½ 1 â€ |\nDo mÃ n hÃ¬nh vÃ  hiá»‡u á»©ng Ã¡nh sÃ¡ng khÃ¡c nhau, mÃ u sáº¯c thá»±c táº¿ cá»§a máº·t hÃ ng cÃ³ thá»ƒ hÆ¡i khÃ¡c so vá»›i hÃ¬nh áº£nh. Vui lÃ²ng cho phÃ©p lá»—i (Â± 3 cm) do Ä‘o lÆ°á»ng thá»§ cÃ´ng |\nã€ðŸŒ¿LÆ°u Ã½ 2 \" |\nTrÆ°á»›c khi Ä‘áº·t hÃ ng, vui lÃ²ng kiá»ƒm tra xem thÃ´ng tin cÃ³ chÃ­nh xÃ¡c khÃ´ng. Vui lÃ²ng chá»n Ä‘Ãºng kÃ­ch thÆ°á»›c, mÃ u sáº¯c vÃ  sáº£n pháº©m. Vui lÃ²ng ghi rÃµ há» tÃªn, Ä‘á»‹a chá»‰, sá»‘ Ä‘iá»‡n thoáº¡i cá»§a ngÆ°á»i nháº­n khi Ä‘áº·t hÃ ng |", "product_price": 190000, "quantity": 2, "image_url": "https://down-vn.img.susercontent.com/file/sg-11134201-7rbkq-lpuk1e2nmo1xec" } ] }

const navigateToProduct = (product_id) => {
  navigateTo(`/chi-tiet-san-pham/${product_id}`)
}
</script>

<style>

</style>
